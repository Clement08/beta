jQuery(document).ready(function(){function e(i){i.length>0&&setTimeout(function(){i.addClass("slides-in"),e(i.next())},50)}function i(){return window.getComputedStyle(document.querySelector(".project-apercu"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function n(){var e=i();if("desktop"==e){var n=d.children("li"),s=n.eq(0).width(),t=Number(d.children("li").eq(1).css("margin-left").replace("px","")),r=(s+t)*(n.length+1)+"px",a=d.children("li.current").index();d.css("width",r),0!=a&&l(d,a*(s+t)+"px")}else d.css("width",""),l(d,0);u=!1}function s(e){var i=e.children(".current"),n=i.index(),s=i.nextAll("li").length,t=i.width(),a=Number(e.children("li").eq(1).css("margin-left").replace("px",""));n=s>4?n+3:n+s-2,translate=n*(t+a)+"px",e.addClass("next"),l(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){r("next",i,e,s)}),$(".no-csstransitions").length>0&&r("next",i,e,s)}function t(e){var i=e.children(".previous"),n=i.index(),s=i.width(),t=Number(e.children("li").eq(1).css("margin-left").replace("px",""));translate=n*(s+t)+"px",e.addClass("prev"),l(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){r("prev",i,e)}),$(".no-csstransitions").length>0&&r("prev",i,e)}function r(e,i,n,s){"next"==e?(n.removeClass("next").find(".previous").removeClass("previous"),i.removeClass("current"),s>4?i.addClass("previous").next("li").next("li").next("li").addClass("current"):4==s?i.next("li").next("li").addClass("current").prev("li").prev("li").addClass("previous"):i.next("li").addClass("current").end().addClass("previous")):(n.removeClass("prev").find(".current").removeClass("current"),i.removeClass("previous").addClass("current"),i.prevAll("li").length>2?i.prev("li").prev("li").prev("li").addClass("previous"):!n.children("li").eq(0).hasClass("current")&&n.children("li").eq(0).addClass("previous")),a()}function a(){var e=c.find("li.current");e.is(":first-child")?v.find(".prev").addClass("inactive"):v.find(".prev").removeClass("inactive"),e.nextAll("li").length<3?v.find(".next").addClass("inactive"):v.find(".next").removeClass("inactive")}function l(e,i){e.css({"-moz-transform":"translateX(-"+i+")","-webkit-transform":"translateX(-"+i+")","-ms-transform":"translateX(-"+i+")","-o-transform":"translateX(-"+i+")",transform:"translateX(-"+i+")"})}var o=$(".portfolio-intro"),c=$(".project-apercu"),d=c.children(".portfolio-slider"),p=$(".project-content"),v=$(".portfolio-slider-navigation"),u=!1;n(),$(window).on("resize",function(){u||(window.requestAnimationFrame?window.requestAnimationFrame(n):n(),u=!0)}),o.on("click",'a[data-action="show-projects"]',function(i){i.preventDefault(),o.addClass("projects-visible"),c.addClass("projects-visible"),setTimeout(function(){e(d.children("li").eq(0))},200)}),o.on("click",function(e){o.hasClass("projects-visible")&&!$(e.target).is('a[data-action="show-projects"]')&&(o.removeClass("projects-visible"),c.removeClass("projects-visible"))}),c.on("click",".portfolio-slider a",function(e){if(e.preventDefault(),jQuery(this).parent("li").next("li").is(".current"))t(d);else if(jQuery(this).parent("li").prev("li").prev("li").prev("li").is(".current"))s(d);else{var i=jQuery(this).attr("href");jQuery(""+i).addClass("is-visible")}}),p.on("click",".close",function(e){e.preventDefault(),p.removeClass("is-visible")}),v.on("click",".next",function(){s(d)}),v.on("click",".prev",function(){t(d)}),$(document).keyup(function(e){var n=i();"37"==e.which&&o.hasClass("projects-visible")&&!v.find(".prev").hasClass("inactive")&&"desktop"==n?t(d):"39"==e.which&&o.hasClass("projects-visible")&&!v.find(".next").hasClass("inactive")&&"desktop"==n?s(d):"27"==e.which&&p.hasClass("is-visible")&&p.removeClass("is-visible")}),d.on("swipeleft",function(){var e=i();v.find(".next").hasClass("inactive")||"desktop"!=e||s(d)}),d.on("swiperight",function(){var e=i();v.find(".prev").hasClass("inactive")||"desktop"!=e||t(d)})});
